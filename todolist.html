<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- 提供react对象 -->
    <script src="./base/react.min.js"></script>
    <!-- 提供reactdom对象 -->
    <script src="./base/react-dom.min.js"></script>
    <!-- 帮助解析jsx:语法糖 -->
    <script src="./base/browser.min.js"></script>
    <style>
    .box{
        /* margin:0;
        padding:0; */
        width:100%;
        height:500px;
        background:yellow;
        padding-top:10px;
    }
    </style>
</head>
<body>
    <div id="app">

    </div>
    <script type="text/babel">
     let Box = React.createClass({//通过getInitialState给组件挂载初始状态赋值，通过this.state获取
        getInitialState(){
            return{
           
                list:[
                    {txt:'渲染数据',finish:false},
                    {txt:'渲染数据',finish:true}
                ]
            }
        },
        addlist(msg){
            let list=this.state.list
            list.push({txt:msg,finish:false})
            this.setState({list:list})
        },
        del(index){
            let list=this.state.list
            list.splice(index,1)
            this.setState({list:list})
        },
        finish(index,e){
            let list=this.state.list
            this.setState({targetValue:e.target.value})
            this.setState({list:list})
        },
         render(){
             let {state}=this
             return(
                 <div className='box'>
              
                 <Input addlist={this.addlist}></Input>
                 <List list={state.list} del={this.del} finish={this.finish}></List>

                 </div>
            )
         }
     })
     let List = React.createClass({
        
         renderlist(data){
            if(!data.length) return (<div>暂无代办事项</div>)
             return(
              
                 <ul>
                 {data.map((item,index)=>{
                     return (<li>
                        {item.txt}::::::::
                        {item.finish?'已完成':<button>完成</button>}
                        <button onClick={this.props.del.bind(this,index)}>删除</button>

                     
                     </li>)
                 })}
                 </ul>
             )
         },
         render(){
             let {props}=this
             
             return(
                 <div>
                  
                    {this.renderlist(props.list)}
                 </div>
            )
         }
     })
     let Input = React.createClass({
         add(){
             let msg=this.refs.input.value
             this.props.addlist(msg)
         },
         render(){
             return(
                 <div>
                    <input type='text' ref='input'/>
                    <button onClick={this.add}>添加</button>
                 </div>
             )
         }
     })
     ReactDOM.render(<Box/>,app)
    </script>
</body>
</html>